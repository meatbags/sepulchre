var stk=function(e){function t(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=i(1),r=function e(){n(this,e),this.master=new s.Master};window.onload=function(){new r}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})})},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Master=void 0;var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=i(3),o=i(5),a=i(14),h=function(){function e(){n(this,e),this.width=960,this.height=540,this.scene=new o.Scene(this.width,this.height),this.renderer=new r.Renderer(this.width,this.height,this.scene.getScene(),this.scene.getCamera()),this.timer=new a.Timer,this.loop()}return s(e,[{key:"loop",value:function(){var e=this;if(!this.paused){this.loopGuard||(this.loopGuard=!0,requestAnimationFrame(function(){e.loopGuard=!1,e.loop()}));var t=this.timer.getDelta();this.scene.update(t),this.renderer.render(t)}}}]),e}();t.Master=h},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})})},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Renderer=void 0;var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();i(!function(){var e=new Error('Cannot find module "../../../lib/glsl"');throw e.code="MODULE_NOT_FOUND",e}());var r=function(){function e(t,i,s,r){n(this,e),this.scene=s,this.camera=r,this.width=t,this.height=i,this.size=new THREE.Vector2(this.width,this.height),this.renderer=new THREE.WebGLRenderer({antialias:!0}),this.renderer.setSize(this.width,this.height),this.renderer.setClearColor(1052688,1),this.postProcessingSetup(),$(".content__inner").append(this.renderer.domElement)}return s(e,[{key:"resize",value:function(e,t){this.width=e,this.height=t,this.size.x=this.width,this.size.y=this.height,this.FXAAPass.uniforms.resolution.value.set(1/this.width,1/this.height),this.bloomPass.setSize(this.width,this.height),this.renderer.setSize(this.width,this.height),this.composer.setSize(this.width,this.height)}},{key:"postProcessingSetup",value:function(){this.renderPass=new THREE.RenderPass(this.scene,this.camera),this.FXAAPass=new THREE.ShaderPass(THREE.FXAAShader),this.FXAAPass.uniforms.resolution.value.set(1/this.width,1/this.height),this.bloomPass=new THREE.UnrealBloomPass(this.size,.7,1,.7),this.noisePass=new THREE.NoisePass,this.noisePass.renderToScreen=!0,this.composer=new THREE.EffectComposer(this.renderer),this.composer.setSize(this.width,this.height),this.composer.addPass(this.renderPass),this.composer.addPass(this.FXAAPass),this.composer.addPass(this.bloomPass),this.composer.addPass(this.noisePass),this.renderer.gammaInput=!0,this.renderer.gammaOutput=!0}},{key:"render",value:function(e){this.composer.render(e)}}]),e}();t.Renderer=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(6);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})})},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Scene=void 0;var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=i(7),o=i(8),a=i(9),h=function(){function e(t,i){n(this,e),this.scene=new THREE.Scene,this.colliderSystem=new Collider.System,this.player=new a.Player(this.scene,this.colliderSystem),this.camera=new r.Camera(t,i,this.player.position),this.lighting=new o.Lighting(this.scene);for(var s=1;s<20;s++){var h=(Math.random(),new THREE.Mesh(new THREE.BoxBufferGeometry(5,1.5,5),new THREE.MeshPhongMaterial({})));h.position.set(15*Math.random()-7,2.75*s,0),h.rotation.set(Math.random()*Math.PI*.125-.0625*Math.PI,Math.random()*Math.PI*.125-.0625*Math.PI,Math.random()*Math.PI*.125-.0625*Math.PI),this.scene.add(h),this.colliderSystem.add(new Collider.Mesh(h))}}return s(e,[{key:"update",value:function(e){this.player.update(e),this.camera.update(e)}},{key:"getScene",value:function(){return this.scene}},{key:"getCamera",value:function(){return this.camera.getCamera()}}]),e}();t.Scene=h},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(t,i,s){n(this,e),this.origin=s,this.fov=75,this.aspectRatio=t/i,this.angle=.5*-Math.PI,this.len=10,this.camera=new THREE.PerspectiveCamera(this.fov,this.aspectRatio,.1,1e3)}return s(e,[{key:"update",value:function(e){this.camera.position.set(this.origin.x+Math.cos(this.angle)*this.len,this.origin.y+.625*this.len,this.origin.z+Math.sin(this.angle)*this.len),this.camera.lookAt(this.origin)}},{key:"getCamera",value:function(){return this.camera}}]),e}();t.Camera=r},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(t){n(this,e),this.scene=t,this.lights={point:{a:new THREE.PointLight(16777215,.25,30,2)},ambient:{a:new THREE.AmbientLight(16777215,.05)}},this.setLightPositions();for(var i in this.lights.point)this.lights.point.hasOwnProperty(i)&&this.scene.add(this.lights.point[i]);for(var s in this.lights.ambient)this.lights.ambient.hasOwnProperty(s)&&this.scene.add(this.lights.ambient[s])}return s(e,[{key:"setLightPositions",value:function(){this.lights.point.a.position.set(1,5,-2)}}]),e}();t.Lighting=r},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Player=void 0;var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=i(10),o=i(12),a=function(){function e(t,i){var s=this;n(this,e),this.position=new THREE.Vector3(0,1,0),this.motion=new THREE.Vector3,this.target={position:new THREE.Vector3,motion:new THREE.Vector3},this.speed=10,this.jump=17,this.falling=!1,this.fallTime=0,this.fallTimeThreshold=.125,this.keys={},this.keyboard=new r.Keyboard(function(e){s.onKeyboard(e)}),this.collider=new Collider.Collider(this.target.position,this.motion),this.collider.setPhysics({gravity:38}),this.colliderSystem=i,this.group=new THREE.Group,this.mesh=new THREE.Mesh(new THREE.BoxBufferGeometry(1,1,1),new THREE.MeshPhongMaterial({})),this.mesh.position.y=.5,this.light=new THREE.PointLight(16777215,.25,5,2),this.light.position.y=2,this.group.add(this.mesh,this.light),t.add(this.group)}return s(e,[{key:"onKeyboard",value:function(e){switch(e){case"a":case"A":case"ArrowLeft":this.keys.left=this.keyboard.keys[e];break;case"d":case"D":case"ArrowRight":this.keys.right=this.keyboard.keys[e];break;case"w":case"W":case"ArrowUp":this.keys.up=this.keyboard.keys[e];break;case"s":case"S":case"ArrowDown":this.keys.down=this.keyboard.keys[e];break;case" ":this.keys.jump=this.keyboard.keys[e]}}},{key:"move",value:function(e){this.keys.left||this.keys.right?this.target.motion.x=((this.keys.left?1:0)+(this.keys.right?-1:0))*this.speed:this.target.motion.x=0,this.keys.up||this.keys.down?this.target.motion.z=((this.keys.up?1:0)+(this.keys.down?-1:0))*this.speed:this.target.motion.z=0,this.keys.jump&&(this.keys.jump=!1,(0==this.motion.y||this.fallTime<this.fallTimeThreshold)&&(this.motion.y=this.jump,this.fallTime=this.fallTimeThreshold)),this.falling=0!=this.motion.y,this.fallTime=this.falling?this.fallTime+e:0,this.falling?(this.motion.x=(0,o.Blend)(this.motion.x,this.target.motion.x,.15),this.motion.z=(0,o.Blend)(this.motion.z,this.target.motion.z,.15)):(this.motion.x=this.target.motion.x,this.motion.z=this.target.motion.z)}},{key:"update",value:function(e){this.move(e),this.collider.move(e,this.colliderSystem),this.position.x=(0,o.Blend)(this.position.x,this.target.position.x,.4),this.position.y=(0,o.Blend)(this.position.y,this.target.position.y,.4),this.position.z=(0,o.Blend)(this.position.z,this.target.position.z,.4),this.group.position.set(this.position.x,this.position.y,this.position.z)}}]),e}();t.Player=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(11);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})})},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(t){var i=this;n(this,e),this.keys={},this.onEvent=t,document.addEventListener("keydown",function(e){i.onKeyDown(e)}),document.addEventListener("keyup",function(e){i.onKeyUp(e)})}return s(e,[{key:"onKeyDown",value:function(e){this.keys[e.key]=!0,this.onEvent(e.key)}},{key:"onKeyUp",value:function(e){this.keys[e.key]=!1,this.onEvent(e.key)}},{key:"isSpecial",value:function(){return this.keys.Shift||this.keys.Control||this.keys.Alt}},{key:"isControl",value:function(){return this.keys.Control}},{key:"isShift",value:function(){return this.keys.Shift}},{key:"isAlt",value:function(){return this.keys.Alt}}]),e}();t.Keyboard=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(13);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,i){return(t-e)*i+e};t.Blend=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(15);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})})},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(){n(this,e),this.time=(new Date).getTime(),this.age=0}return s(e,[{key:"getDelta",value:function(){var e=(new Date).getTime(),t=(e-this.time)/1e3;return this.age+=t,this.time=e,t}}]),e}();t.Timer=r}]);